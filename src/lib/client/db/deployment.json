[
  {
    "idx": 0,
    "when": 1749896014745,
    "tag": "0000_cold_imperial_guard",
    "hash": "7550fd42a57272be5cdff18eed74da1c62852bc5e12eb3e590ea297c63635830",
    "sql": [
      "CREATE TABLE \"chats\" (\"id\" uuid PRIMARY KEY DEFAULT gen_random_uuid() NOT NULL,\"user_id\" uuid NOT NULL,\"title\" text,\"title_manually_edited\" boolean DEFAULT false NOT NULL,\"selected_model\" varchar(50) NOT NULL,\"reasoning_level\" varchar(50) DEFAULT 'none' NOT NULL,\"web_search_enabled\" boolean DEFAULT false NOT NULL,\"created_at\" timestamp with time zone DEFAULT now() NOT NULL,\"updated_at\" timestamp with time zone DEFAULT now() NOT NULL);",
      "CREATE TABLE \"message_segments\" (\"id\" uuid PRIMARY KEY DEFAULT gen_random_uuid() NOT NULL,\"user_id\" uuid NOT NULL,\"message_id\" uuid NOT NULL,\"ordinal\" integer NOT NULL,\"kind\" varchar(50) NOT NULL,\"content\" text,\"tool_name\" text,\"tool_args\" jsonb,\"tool_result\" jsonb,\"created_at\" timestamp with time zone DEFAULT now() NOT NULL);",
      "CREATE TABLE \"messages\" (\"id\" uuid PRIMARY KEY DEFAULT gen_random_uuid() NOT NULL,\"user_id\" uuid NOT NULL,\"chat_id\" uuid NOT NULL,\"thread_id\" uuid NOT NULL,\"parent_message_id\" uuid,\"version\" integer DEFAULT 1 NOT NULL,\"role\" varchar(50) NOT NULL,\"status\" varchar(50) DEFAULT 'processing' NOT NULL,\"metadata\" jsonb,\"model\" varchar(50) NOT NULL,\"created_at\" timestamp with time zone DEFAULT now() NOT NULL,\"updated_at\" timestamp with time zone DEFAULT now() NOT NULL);",
      "CREATE TABLE \"message_tokens\" (\"id\" uuid PRIMARY KEY DEFAULT gen_random_uuid() NOT NULL,\"user_id\" uuid NOT NULL,\"message_id\" uuid NOT NULL,\"kind\" varchar(50) NOT NULL,\"tokens\" text NOT NULL,\"created_at\" timestamp with time zone DEFAULT now() NOT NULL);",
      "CREATE TABLE \"threads\" (\"id\" uuid PRIMARY KEY DEFAULT gen_random_uuid() NOT NULL,\"user_id\" uuid NOT NULL,\"chat_id\" uuid NOT NULL,\"created_at\" timestamp with time zone DEFAULT now() NOT NULL);",
      "CREATE TABLE \"user\" (\"id\" uuid PRIMARY KEY DEFAULT gen_random_uuid() NOT NULL,\"name\" text NOT NULL,\"email\" text NOT NULL,\"profile_picture\" text,\"role\" varchar(255) DEFAULT 'USER' NOT NULL,\"subscribed_until\" timestamp with time zone,CONSTRAINT \"user_email_unique\" UNIQUE(\"email\"));",
      "CREATE INDEX \"message_segments_message_id_ordinal_index\" ON \"message_segments\" USING btree (\"message_id\",\"ordinal\");",
      "CREATE INDEX \"messages_thread_id_created_at_index\" ON \"messages\" USING btree (\"thread_id\",\"created_at\");",
      "CREATE UNIQUE INDEX \"messages_parent_message_id_version_index\" ON \"messages\" USING btree (\"parent_message_id\",\"version\");",
      "CREATE INDEX \"threads_chat_id_created_at_index\" ON \"threads\" USING btree (\"chat_id\",\"created_at\");"
    ]
  },
  {
    "idx": 1,
    "when": 1749922452109,
    "tag": "0001_simple_night_thrasher",
    "hash": "810a7e359d0f02c03e2eed9fb3a77e30b3b517edc3ae5b5dca230811c02a2c81",
    "sql": [
      "ALTER TABLE \"messages\" ADD COLUMN \"reasoning_level\" varchar(50) DEFAULT 'none' NOT NULL;",
      "ALTER TABLE \"messages\" ADD COLUMN \"web_search_enabled\" boolean DEFAULT false NOT NULL;"
    ]
  },
  {
    "idx": 2,
    "when": 1749999276314,
    "tag": "0002_charming_union_jack",
    "hash": "00c91d9c42f42258ced12af5a83468aab56e3e5086b192d7ad395197aff18b73",
    "sql": ["ALTER TABLE \"messages\" ADD COLUMN \"error\" text;"]
  },
  {
    "idx": 3,
    "when": 1750451386203,
    "tag": "0003_perpetual_scalphunter",
    "hash": "d579813f532ffb1016f53c7427bb77b11addb4f7c2030c533637ec8ef8f6fb6e",
    "sql": [
      "CREATE INDEX \"title_search_index\" ON \"chats\" USING gin (to_tsvector('english', \"title\"));",
      "CREATE INDEX \"content_search_index\" ON \"message_segments\" USING gin (to_tsvector('english', \"content\"));"
    ]
  }
]
